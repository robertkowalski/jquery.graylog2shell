/*! jQuery Graylog2 Shell - v0.1.0 - 2012-05-29
* https://github.com/robertkowalski/jquery.graylog2shell
* Copyright (c) 2012 Robert Kowalski; Licensed GPL */
(function(a){var b=function(){var b=this;a.isFunction(b._init)&&b._init.apply(b,arguments)};b.prototype={_init:function(b,c){var d=this,e={};d.defaults=a.fn.shell.defaults,a.extend(!0,e,d.defaults,b),d.options=e,d.$element=a(c),d._createContainerIfNotExists(),d._setWidthOfInput(),d._bindEventsFromKeyboard(),d.focus()},focus:function(){var a=this;a.$element.find("input").focus()},_createContainerIfNotExists:function(){var a=this,b=a._testForContainer();b||a._renderShellHtml()},_testForContainer:function(){var b=this,c=a("#shell-container");if(c&&c.length)return!0},_createShellHtml:function(){var a='<div id="shell-container">                    <ul id="shell">                      <li>                        <span class="shell-prompt">rocko #</span>                        <input class="shell-command-input" type="text" spellcheck="false">                      </li>                    </ul>                  </div>';return a},_renderShellHtml:function(){var a=this,b=a._createShellHtml();a.$element.html(b)},_setWidthOfInput:function(){var b=a("#shell-container"),c=b.find(".shell-prompt"),d=30,e=b.outerWidth(!1)-c.outerWidth(!1)-d;b.find("input").css("width",e)},_bindEventsFromKeyboard:function(){var b=a("#shell-container"),c=b.find("input"),d,e;c.bind("keyup",function(b){d=b.which;if(d===13){if(a.trim(c.val()).length===0)return;e=c.val(),c.val("")}else d===38&&e&&c.val()!==e&&c.val(e)})},_processInput:function(b){var c=a("#shell"),d=a("#shell-command-input"),e='<li class="shell-wait"><img src="images/loading-shell.gif" /> Calculating</li>"';c.append(e),d.attr("disabled","disabled")}},a.fn.extend({shell:function(c){var d=Array.prototype.slice.call(arguments),e=d.shift();return this.each(function(f,g){var h=a.data(g,"shell")||a.data(g,"shell",new b(c,g));e&&typeof e=="string"&&e.charAt(0)!=="_"&&a.isFunction(h[e])&&h[e].apply(h,d)})}}),a.fn.shell.defaults={}})(jQuery);